# figma数据结构化去重中间件

## 大方向

- 提取出可引用的组件，通过引用的方式替换重复部分。
- 提取出可引用组件通用属性，以及可变属性，以 boundVariables的形式添加到引用节点中。
- 在首个引用节点中，添加 sharedProps，其余引用只添加 boundVariables。

## 定义可提取组件算法

需要满足以下所有条件，则判定为复用组件。

- node 的 type 和 name 是否相同。
- 存在>= 50% 的相同属性。
- 存在>= 50% 的相同子节点。
  - 根据 type:name 值
  - 顺序相同，使用 LCS 查找最长公共子序列。

## Tips
- 在 afterConvert 阶段处理。
- 不要改动其他文件。